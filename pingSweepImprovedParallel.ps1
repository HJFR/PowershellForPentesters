$network = "192.168.1."
$range = (1..254)
workflow ParallelSweep
{
    ForEach -Parallel -throttlelimit 4 ($ip in $range){
        Test-connection -count 1 -Delay 2 ($network + $ip)
    }
}
ParallelSweep | Select-String ttl